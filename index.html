<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Overlay Regalos Minecraft</title>

<style>
/* ================= BASE ================= */
body {
  margin: 0;
  background: transparent;
  overflow: hidden;
  font-family: Arial, sans-serif;
  color: #000;
}

/* ================= EDITOR ================= */
.editor {
  position: fixed;
  top: 10px;
  left: 10px;
  width: 420px;
  background: rgba(0,0,0,0.9);
  border: 3px solid #55ff55;
  border-radius: 10px;
  padding: 10px;
  z-index: 9999;
}

.editor h3 {
  margin: 0 0 6px 0;
  color: #55ff55;
  text-align: center;
}

.editor textarea {
  width: 100%;
  height: 280px;
  background: #111;
  color: #55ff55;
  border: 2px solid #55ff55;
  resize: none;
  font-family: monospace;
  font-size: 12px;
}

.editor button {
  width: 100%;
  margin-top: 8px;
  padding: 8px;
  background: #55ff55;
  border: none;
  border-radius: 6px;
  font-weight: bold;
  cursor: pointer;
}

/* ================= OVERLAY GRID ================= */
.overlay {
  position: absolute;
  bottom: 40px;
  left: 50%;
  transform: translateX(-50%);
  width: 960px;
  display: grid;
  grid-template-columns: repeat(4, 1fr);
  grid-template-rows: repeat(4, 1fr);
  gap: 14px;
}

/* ================= CARD ================= */
.card {
  position: relative;
  background: #f2f2f2;
  border-radius: 12px;
  padding: 10px;
  animation: fadeIn 0.5s ease;
}

/* regalo arriba derecha */
.gift-img {
  position: absolute;
  top: 6px;
  right: 6px;
  width: 36px;
  height: 36px;
}

/* recompensa centro */
.reward-img {
  width: 100%;
  height: 90px;
  object-fit: contain;
  display: block;
  margin: 10px auto 4px;
}

/* descripción */
.desc {
  font-size: 12px;
  text-align: center;
  font-weight: bold;
}

/* ================= ANIMATION ================= */
@keyframes fadeIn {
  from {
    opacity: 0;
    transform: scale(0.95);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}
</style>
</head>

<body>

<!-- ================= EDITOR ================= -->
<div class="editor">
  <h3>Editor de regalos (JSON)</h3>
  <textarea id="jsonInput">
[
  {
    "giftImage": "https://i.imgur.com/6XKQ9kP.png",
    "rewardImage": "https://i.imgur.com/0Z8FQYQ.png",
    "description": "+1 Armadura de hierro"
  },
  {
    "giftImage": "https://i.imgur.com/W1ZJk4R.png",
    "rewardImage": "https://i.imgur.com/9RZ6Xzv.png",
    "description": "Spawn Creeper"
  },
  {
    "giftImage": "https://i.imgur.com/z7mX8sL.png",
    "rewardImage": "https://i.imgur.com/9Z3K6RJ.png",
    "description": "Espada encantada"
  },
  {
    "giftImage": "https://i.imgur.com/Y3GQXhF.png",
    "rewardImage": "https://i.imgur.com/Kq5bY2s.png",
    "description": "Lluvia de lava"
  },
  {
    "giftImage": "https://i.imgur.com/vmN5b4F.png",
    "rewardImage": "https://i.imgur.com/Y4n9R4p.png",
    "description": "Invocar jefe"
  }
]
  </textarea>
  <button onclick="loadGifts()">Actualizar overlay</button>
</div>

<!-- ================= OVERLAY ================= -->
<div class="overlay" id="overlay"></div>

<script>
/* ======= MODO EDITOR ======= */
const params = new URLSearchParams(window.location.search);
const editMode = params.get("edit") === "true";
if (!editMode) document.querySelector(".editor").style.display = "none";

/* ======= LOGICA ======= */
let gifts = [];
let index = 0;
const VISIBLE = 16;
const overlay = document.getElementById("overlay");

function loadGifts() {
  try {
    gifts = JSON.parse(document.getElementById("jsonInput").value);
    index = 0;
    render();
  } catch {
    alert("JSON inválido");
  }
}

function render() {
  overlay.innerHTML = "";

  for (let i = 0; i < VISIBLE; i++) {
    const gift = gifts[(index + i) % gifts.length];

    const card = document.createElement("div");
    card.className = "card";

    card.innerHTML = `
      <img class="gift-img" src="${gift.giftImage}">
      <img class="reward-img" src="${gift.rewardImage}">
      <div class="desc">${gift.description}</div>
    `;

    overlay.appendChild(card);
  }

  index = (index + VISIBLE) % gifts.length;
}

loadGifts();
setInterval(render, 6000); // rotación
</script>

</body>
</html>
