<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Overlay Regalos Minecraft</title>

<style>
/* ================= BASE ================= */
body {
  margin: 0;
  background: transparent;
  overflow: hidden;
  font-family: 'Minecraftia', Arial, sans-serif;
  color: #fff;
}

/* ================= EDITOR ================= */
.editor {
  position: fixed;
  top: 10px;
  left: 10px;
  width: 420px;
  background: rgba(0,0,0,0.9);
  border: 3px solid #55ff55;
  border-radius: 10px;
  padding: 10px;
  z-index: 9999;
}

.editor h3 {
  margin: 0 0 6px 0;
  color: #55ff55;
  text-align: center;
}

.editor textarea {
  width: 100%;
  height: 260px;
  background: #111;
  color: #55ff55;
  border: 2px solid #55ff55;
  resize: none;
  font-family: monospace;
  font-size: 12px;
}

.editor button {
  width: 100%;
  margin-top: 8px;
  padding: 8px;
  background: #55ff55;
  border: none;
  border-radius: 6px;
  font-weight: bold;
  cursor: pointer;
}

/* ================= OVERLAY ================= */
.overlay {
  position: absolute;
  bottom: 80px;
  left: 50%;
  transform: translateX(-50%);
  width: 1000px;
  display: flex;
  gap: 16px;
}

.gift {
  flex: 1;
  background: rgba(20,20,20,0.9);
  border: 3px solid #55ff55;
  border-radius: 8px;
  padding: 10px;
  text-align: center;
  animation: enter 0.6s ease;
}

.gift img {
  image-rendering: pixelated;
}

.gift-icon {
  width: 56px;
  height: 56px;
}

.reward-icon {
  width: 42px;
  height: 42px;
  margin-top: 6px;
}

.gift-name {
  margin-top: 6px;
  color: #55ff55;
  font-size: 15px;
}

.description {
  font-size: 12px;
  margin-top: 4px;
  color: #fff799;
}

/* ================= ANIMATIONS ================= */
@keyframes enter {
  from {
    opacity: 0;
    transform: translateY(20px) scale(0.95);
  }
  to {
    opacity: 1;
    transform: translateY(0) scale(1);
  }
}
</style>
</head>

<body>

<!-- ================= EDITOR ================= -->
<div class="editor">
  <h3>Editor de Regalos (JSON)</h3>
  <textarea id="jsonInput">
[
  {
    "giftImage": "https://i.imgur.com/6XKQ9kP.png",
    "giftName": "Rosa",
    "rewardImage": "https://i.imgur.com/0Z8FQYQ.png",
    "description": "+1 Diamante"
  },
  {
    "giftImage": "https://i.imgur.com/W1ZJk4R.png",
    "giftName": "Cohete",
    "rewardImage": "https://i.imgur.com/9RZ6Xzv.png",
    "description": "Spawn Creeper"
  },
  {
    "giftImage": "https://i.imgur.com/z7mX8sL.png",
    "giftName": "Corona",
    "rewardImage": "https://i.imgur.com/9Z3K6RJ.png",
    "description": "Espada encantada"
  },
  {
    "giftImage": "https://i.imgur.com/Y3GQXhF.png",
    "giftName": "León",
    "rewardImage": "https://i.imgur.com/Kq5bY2s.png",
    "description": "Lluvia de lava"
  },
  {
    "giftImage": "https://i.imgur.com/vmN5b4F.png",
    "giftName": "Universo",
    "rewardImage": "https://i.imgur.com/Y4n9R4p.png",
    "description": "Invocar jefe final"
  }
]
  </textarea>
  <button onclick="loadGifts()">Actualizar overlay</button>
</div>

<!-- ================= OVERLAY ================= -->
<div class="overlay" id="overlay"></div>

<script>
/* ======= MODO EDITOR / OVERLAY ======= */
const params = new URLSearchParams(window.location.search);
const editMode = params.get("edit") === "true";

if (!editMode) {
  document.querySelector(".editor").style.display = "none";
}

/* ======= LOGICA REGALOS ======= */
let gifts = [];
let index = 0;
const overlay = document.getElementById("overlay");

function loadGifts() {
  try {
    gifts = JSON.parse(document.getElementById("jsonInput").value);
    index = 0;
    render();
  } catch (e) {
    alert("JSON inválido");
  }
}

function render() {
  if (gifts.length === 0) return;

  overlay.innerHTML = "";

  for (let i = 0; i < 4; i++) {
    const gift = gifts[(index + i) % gifts.length];

    const div = document.createElement("div");
    div.className = "gift";

    div.innerHTML = `
      <img class="gift-icon" src="${gift.giftImage}">
      <div class="gift-name">${gift.giftName}</div>
      <div class="description">${gift.description}</div>
      <img class="reward-icon" src="${gift.rewardImage}">
    `;

    overlay.appendChild(div);
  }

  index = (index + 1) % gifts.length;
}

loadGifts();
setInterval(render, 5000); // rotación cada 5s
</script>

</body>
</html>
